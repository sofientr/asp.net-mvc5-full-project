@model Inspinia_MVC5.Models.Personnels


<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Personnel Personnel</h5>
                </div>
                <div class="ibox-content">

				@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        @Html.ValidationSummary(true)

        <div class="form-group">
            @Html.LabelFor(model => model.Role, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Role)
                @Html.ValidationMessageFor(model => model.Role)

            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Email, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Email)
                @Html.ValidationMessageFor(model => model.Email)

            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Nom, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Nom)
                @Html.ValidationMessageFor(model => model.Nom)
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Password, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Password)
                @Html.ValidationMessageFor(model => model.Password)
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Tel, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Tel)
                @Html.ValidationMessageFor(model => model.Tel)
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="button" value="Create" class="btn btn-primary" onclick="update_personnels()" />
				@Html.ActionLink("Cancel", "Index", null, new { @class = "btn btn-white"})
            </div>
        </div>
    </div>
}

                </div>
            </div>
        </div>
    </div>
 </div>



<script>
    function update_personnels() {
        Mode = "@ViewBag.Mode";
          id = "@ViewBag.id";
    Designation= "@ViewBag.Designation";
    Description="@ViewBag.Description";
    Delai_de_Soumission="@ViewBag.Delai_de_Soumission";
    Date_de_Soumission= "@ViewBag.Date_de_Soumission";
    DateConsultation="@ViewBag.DateConsultation";
    EtatSoum= "@ViewBag.EtatSoum";
    faisabilite="@ViewBag.faisabilite";
    AffaireObtenue="@ViewBag.AffaireObtenue";
    Importance ="@ViewBag.Importance";
    NbHeurePrepOffre="@ViewBag.NbHeurePrepOffre";
    ClientId="@ViewBag.ClientId";
    PersonnelId="@ViewBag.PersonnelId";
    ResponsableTechnique="@ViewBag.ResponsableTechnique";
    CoordinateurCommerciale="@ViewBag.CoordinateurCommerciale";
    CoordinateurRealisation="@ViewBag.CoordinateurRealisation";
        $.ajax({
            type: 'POST',

            url: "/AffaireCommerciales/AddPersonnel?Role=" + Role.value + "&Nom=" + Nom.value + "&Email=" + Email.value + "&Tel=" + Tel.value,
            success: function (response) {

                $("#Role").val("");
                $("#Nom").val("");
                $("#Email").val("");
                $("#Tel").val("");
                if (Mode == "Create") {
                    window.location.href = '/AffaireCommerciales/Create?Designation=' + Designation + '&Description=' + Description + '&Delai_de_Soumission=' + Delai_de_Soumission + '&Date_de_Soumission=' + Date_de_Soumission + '&DateConsultation=' + DateConsultation + '&EtatSoum=' + EtatSoum + '&faisabilite=' + faisabilite + '&AffaireObtenue=' + AffaireObtenue + '&Importance=' + Importance + '&NbHeurePrepOffre=' + NbHeurePrepOffre + '&ClientId=' + ClientId + '&PersonnelId=' + PersonnelId + '&ResponsableTechnique=' + ResponsableTechnique + '&CoordinateurCommerciale=' + CoordinateurCommerciale + '&CoordinateurRealisation=' + CoordinateurRealisation;
                }
                else {
                    window.location.href = '/AffaireCommerciales/Edit?id=' + id + '&Designation=' + Designation + '&Description=' + Description + '&Delai_de_Soumission=' + Delai_de_Soumission + '&Date_de_Soumission=' + Date_de_Soumission + '&DateConsultation=' + DateConsultation + '&EtatSoum=' + EtatSoum + '&faisabilite=' + faisabilite + '&AffaireObtenue=' + AffaireObtenue + '&Importance=' + Importance + '&NbHeurePrepOffre=' + NbHeurePrepOffre + '&ClientId=' + ClientId + '&PersonnelId=' + PersonnelId + '&ResponsableTechnique=' + ResponsableTechnique + '&CoordinateurCommerciale=' + CoordinateurCommerciale + '&CoordinateurRealisation=' + CoordinateurRealisation;

                }
            }
        });
    }

    
</script>



 
